<div class="notes-list-cont">
  <div class="filters">
    <div class="filter subject-filter">
      <mat-form-field appearance="fill">
        <mat-label>Subjects</mat-label>
        <mat-select [formControl]="selectedSubjects" multiple>
          <mat-option *ngFor="let subject of subjects" [value]="subject.key" (click)="onFilter($event)">{{subject.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="filter cate-filter">
      <mat-form-field appearance="fill">
        <mat-label>Categories</mat-label>
        <mat-select [formControl]="selectedCate" multiple>
          <mat-option *ngFor="let cate of categories" [value]="cate.key" (click)="onFilter($event)">{{cate.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="filter tag-filter">
      <mat-form-field appearance="fill">
        <mat-label>Tags</mat-label>
        <mat-select [formControl]="selectedTags" multiple>
          <mat-option *ngFor="let tag of uniqueTags" [value]="tag" (click)="onTagSelect($event)">{{tag}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="filter imp-filter">
      <mat-form-field appearance="fill">
        <mat-label>Importance Level</mat-label>
        <mat-select [formControl]="selectedImp" multiple>
          <mat-option *ngFor="let l of levels" [value]="l" (click)="onImpSelect($event)">{{l}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="filter diff-filter">
      <mat-form-field appearance="fill">
        <mat-label>Difficulty Level</mat-label>
        <mat-select [formControl]="selectedDiff" multiple>
          <mat-option *ngFor="let l of levels" [value]="l" (click)="onDiffSelect($event)">{{l}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

    <div class="filter sorting ml-5" >
      <mat-form-field appearance="fill">
        <mat-label>Sort By</mat-label>
        <mat-select [formControl]="selectedSort">
          <mat-option [value]="">Select</mat-option>
          <mat-option *ngFor="let s of sorting" [value]="s.key" (click)="onSortSelect($event)">{{s.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>

  </div>




  <button
    class="app-primary-btn"
    style="position: absolute; top: 7em; right: 2.2em"
    mat-flat-button
    color="primary"
    (click)="addNote()"
  >
    ADD
  </button>

  <div class="noteListCont col-12 row p-0 m-0">
    <div
      class=""
      [ngClass]="{ 'col-6': addNoteFlag, 'col-12 p-0 m-0': !addNoteFlag }"
      style="overflow-y: scroll; height: calc(100vh - 5em); padding-bottom: 15em !important;"
    >
      <mat-card
        *ngFor="let note of notes; index as i"
        style="margin-bottom: 1em; padding-bottom: 2em"
      >
        <div class="note-action-btns">
          <i
            class="material-icons cursor-pointer mr-1"
            (click)="editNote(note, i)"
            matTooltip="Edit Note"
            >edit</i
          >
          <i
            class="material-icons cursor-pointer"
            (click)="dltNote(note.id)"
            matTooltip="Delete Note"
            >delete</i
          >
        </div>

        <div class="note-info">
          <div class="info imp-level" *ngIf="note.imp">{{ note.imp }}</div>
          <div class="info diff-level">{{ note.diff }}</div>
          <div class="info note-cate" *ngIf="note.cate">{{ note.cate }}</div>
        </div>

        <div class="note-links">
          <div class="mb-1" *ngFor="let link of note.links; index as i">
            <a href="{{ link.name }}" target="_blank" title="{{ link.name }}">Link {{ i+ 1 }}</a>
          </div>
          
        </div>

        <div class="col-11">
          <div class="col-12 mb-4">
            <span class="text-bold">{{ i + 1 }}. </span> {{ note.ques }}
          </div>

          <div class="col-12 mb-4">
            <!-- <span class="text-bold">Ans. </span> -->
            <!-- [theme]="'eclipse'" -->
            <div
              ace-editor
              [(text)]="note.ans"
              [mode]="'javascript'"
              [options]="options"
              [readOnly]="true"
              [autoUpdateContent]="true"
              [durationBeforeCallback]="1000"
              (textChanged)="onChange($event)"
              style="min-height: 250px; width: 100%; overflow-y: auto"
            ></div>
            <!-- <pre class="brush: js notranslate">
            <code>{{note.ans}}</code>
            </pre> -->
          </div>

          <div class="col-12 mb-4" *ngIf="note.tags && note.tags.length">
            <span class="text-bold">Tags : </span>
            <mat-chip-list style="display: inline-block;">
              <mat-chip color="primary" selected *ngFor="let tag of note.tags">{{ tag.name }}</mat-chip>
            </mat-chip-list>
            <!-- <div class="info note-tag" *ngFor="let tag of note.tags">{{ tag.name }}</div> -->
          </div>
        </div>
      </mat-card>
    </div>

    <div class="add-note-fix" *ngIf="addNoteFlag">
      <app-add-notes
        (closeBtnClk)="closeBtnClk($event)"
        (addEditBtnClk)="addEditBtnClk($event)"
        [editNoteData]="editNoteData"
      ></app-add-notes>
    </div>
  </div>
</div>
